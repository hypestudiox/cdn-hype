!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).shave=t()}(this,function(){"use strict";function q(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(o=r.next()).done;)a.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}function T(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||((o=o||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}return function(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var o="string"==typeof(e=e)?T([],q(document.querySelectorAll(e)),!1):"length"in e?T([],q(e),!1):[e];if(o.length)for(var i=void 0===(e=n.character)?"â€¦":e,r=void 0===(e=n.classname)?"js-shave":e,e=void 0===(e=n.spaces)||e,a=n.charclassname,l=void 0===a?"js-shave-char":a,c=void 0===(a=n.link)?{}:a,s="boolean"!=typeof e||e,f=c&&"{}"!==JSON.stringify(c)&&c.href,d=f?"a":"span",h=0;h<o.length;h+=1){var u=o[h],v=u.style,y=u.querySelector("."+r),m=void 0===u.textContent?"innerText":"textContent",y=(y&&(u.removeChild(u.querySelector("."+l)),u[m]=u[m]),u[m]),g=s?y.split(" "):y;if(!(g.length<2)){var y=v.height,p=(v.height="auto",v.maxHeight);if(v.maxHeight="none",u.offsetHeight<=t)v.height=y,v.maxHeight=p;else{var x,b=f&&c.textContent?c.textContent:i,j=document.createElement(d),C={className:l,textContent:b};for(x in C)j[x]=C[x],j.textContent=i;if(f)for(var H in c)j[H]=c[H];for(var A,E=g.length-1,S=0;S<E;)A=S+E+1>>1,u[m]=s?g.slice(0,A).join(" "):g.slice(0,A),u.insertAdjacentElement("beforeend",j),u.offsetHeight>t?E=A-1:S=A;u[m]=s?g.slice(0,E).join(" "):g.slice(0,E),u.insertAdjacentElement("beforeend",j);var b=s?" ".concat(g.slice(E).join(" ")):g.slice(E),b=document.createTextNode(b),N=document.createElement("span");N.classList.add(r),N.style.display="none",N.appendChild(b),u.insertAdjacentElement("beforeend",N),v.height=y,v.maxHeight=p}}}}});
